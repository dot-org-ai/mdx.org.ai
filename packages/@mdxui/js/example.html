<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>@mdxui/js Example - Selective Hydration with Hono JSX DOM</title>

  <!-- Inline theme script to prevent FOUC (Flash of Unstyled Content) -->
  <script>
    // Minimal inline theme script (generated by worker)
    (function(){const k='mdxui-theme',s=()=>matchMedia('(prefers-color-scheme:dark)').matches?'dark':'light',g=()=>{try{return localStorage.getItem(k)}catch{return null}},m=g()||'auto',t=m==='auto'?s():m,r=document.documentElement;r.classList.add(t);let e=document.querySelector('meta[name="color-scheme"]');if(!e){e=document.createElement('meta');e.name='color-scheme';document.head.appendChild(e)}e.content=t==='dark'?'dark':'light';window.__mdxui_theme={get:()=>t,set:(n)=>{try{localStorage.setItem(k,n)}catch{}const nt=n==='auto'?s():n;r.classList.remove('light','dark');r.classList.add(nt);e.content=nt==='dark'?'dark':'light'},toggle:()=>{const n=t==='dark'?'light':'dark';window.__mdxui_theme.set(n)}}})();
  </script>

  <!-- Basic CSS variables for theming -->
  <style>
    :root {
      --background: #ffffff;
      --foreground: #000000;
      --border: #e5e5e5;
      --muted: #f5f5f5;
      --primary: #0070f3;
      --primary-foreground: #ffffff;
      --radius: 0.5rem;
      --font-sans: system-ui, -apple-system, sans-serif;
    }

    .dark {
      --background: #000000;
      --foreground: #ffffff;
      --border: #333333;
      --muted: #1a1a1a;
      --primary: #0070f3;
      --primary-foreground: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-sans);
      background: var(--background);
      color: var(--foreground);
      line-height: 1.6;
      padding: 2rem;
      transition: background 0.2s, color 0.2s;
    }

    header {
      max-width: 800px;
      margin: 0 auto 3rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }

    main {
      max-width: 800px;
      margin: 0 auto;
    }

    section {
      margin-bottom: 3rem;
      padding: 2rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--muted);
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
    }

    h2 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    p {
      margin-bottom: 1rem;
    }

    pre {
      background: var(--background);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      overflow-x: auto;
      margin-bottom: 1rem;
    }

    code {
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
    }

    .component-demo {
      margin-top: 1rem;
      padding: 1rem;
      background: var(--background);
      border: 1px solid var(--border);
      border-radius: var(--radius);
    }

    .badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
      font-weight: 600;
      border-radius: 0.25rem;
      background: var(--primary);
      color: var(--primary-foreground);
    }

    .static-content {
      color: var(--muted-foreground, #666);
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>@mdxui/js Demo</h1>
      <span class="badge">2.8KB Runtime</span>
    </div>
    <!-- ThemeToggle component - only loaded if specified in hydrate script -->
    <div data-hydrate="ThemeToggle"></div>
  </header>

  <main>
    <!-- Static content - no JavaScript needed -->
    <section>
      <h2>Static Content (No JS)</h2>
      <p class="static-content">
        This section is pure HTML with no JavaScript. It loads instantly and works
        even if JavaScript is disabled or fails to load. Perfect for SEO and accessibility!
      </p>
      <p>
        Only the interactive components below will load JavaScript via selective hydration.
        This means faster initial page load and better performance.
      </p>
    </section>

    <!-- Counter component demo -->
    <section>
      <h2>Counter Component</h2>
      <p>
        A simple counter with increment and decrement buttons. This component uses
        <code>useState</code> from Hono JSX to manage state.
      </p>
      <div class="component-demo">
        <!-- Counter with initial value of 10 -->
        <div data-hydrate="Counter" data-props='{"initial":10}'></div>
      </div>
      <pre><code>&lt;div data-hydrate="Counter" data-props='{"initial":10}'&gt;&lt;/div&gt;</code></pre>
    </section>

    <!-- CopyButton component demo -->
    <section>
      <h2>Copy Button Component</h2>
      <p>
        Copy text to clipboard with visual feedback. Uses the Clipboard API and
        <code>useState</code> for the "copied" state.
      </p>
      <div class="component-demo">
        <pre><code>console.log('Hello from @mdxui/js!')</code></pre>
        <div data-hydrate="CopyButton" data-props='{"text":"console.log(\"Hello from @mdxui/js!\")"}'></div>
      </div>
      <pre><code>&lt;div data-hydrate="CopyButton" data-props='{"text":"..."}'&gt;&lt;/div&gt;</code></pre>
    </section>

    <!-- Accordion component demo -->
    <section>
      <h2>Accordion Component</h2>
      <p>
        Collapsible content panel with smooth animations. Great for FAQs, details,
        and progressive disclosure.
      </p>
      <div class="component-demo">
        <div data-hydrate="Accordion" data-props='{"title":"Click to expand this section"}'>
          <p>
            This content is hidden by default and only shown when the user clicks
            the accordion header. The component uses <code>useState</code> to track
            the open/closed state.
          </p>
          <p>
            You can have any content inside an accordion, including other components,
            images, code blocks, or nested accordions.
          </p>
        </div>
      </div>
      <pre><code>&lt;div data-hydrate="Accordion" data-props='{"title":"...","defaultOpen":false}'&gt;
  &lt;p&gt;Hidden content...&lt;/p&gt;
&lt;/div&gt;</code></pre>
    </section>

    <!-- Multiple components -->
    <section>
      <h2>Multiple Instances</h2>
      <p>
        You can have multiple instances of the same component. Each maintains its own
        independent state:
      </p>
      <div class="component-demo">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <div data-hydrate="Counter" data-props='{"initial":0}'></div>
          <div data-hydrate="Counter" data-props='{"initial":5}'></div>
          <div data-hydrate="Counter" data-props='{"initial":10}'></div>
        </div>
      </div>
    </section>

    <!-- Architecture explanation -->
    <section>
      <h2>How It Works</h2>
      <p>
        The selective hydration system only loads JavaScript for components marked
        with <code>data-hydrate</code> attributes:
      </p>
      <ol style="margin-left: 2rem;">
        <li>Server renders full HTML (works without JS)</li>
        <li>Browser loads minimal hydration script</li>
        <li>Script scans for <code>[data-hydrate]</code> elements</li>
        <li>Imports only specified component bundles</li>
        <li>Hydrates each element with component + props</li>
        <li>Observes DOM for dynamically added elements</li>
      </ol>
      <p style="margin-top: 1rem;">
        <strong>Result:</strong> This page loads only ~12KB of JavaScript (2.8KB runtime + 4 components),
        compared to ~50KB for a typical React app. And it only loads what's actually used!
      </p>
    </section>

    <!-- Performance stats -->
    <section>
      <h2>Performance</h2>
      <p>Bundle sizes (minified + gzipped):</p>
      <ul style="margin-left: 2rem;">
        <li><strong>Runtime (Hono JSX DOM):</strong> 2.8 KB</li>
        <li><strong>Counter:</strong> ~1 KB</li>
        <li><strong>ThemeToggle:</strong> ~1 KB</li>
        <li><strong>CopyButton:</strong> ~1 KB</li>
        <li><strong>Accordion:</strong> ~1 KB</li>
      </ul>
      <p style="margin-top: 1rem;">
        <strong>Total for this page:</strong> ~7 KB of JavaScript (vs ~50 KB for React)
      </p>
      <p>
        All bundles are served from Cloudflare's edge network with aggressive caching,
        ensuring fast load times worldwide.
      </p>
    </section>
  </main>

  <!--
    Selective Hydration Script

    This script is loaded AFTER the HTML content, so the page is visible and
    interactive (for static content) immediately.

    Only the components specified here will be loaded:
    - ThemeToggle (for the header)
    - Counter (multiple instances)
    - CopyButton (for code examples)
    - Accordion (for collapsible sections)

    Each component is loaded as a separate, tree-shaken bundle.
  -->
  <script type="module">
    // In production, this would be:
    // <script src="https://js.mdxui.org/hydrate?components=ThemeToggle,Counter,CopyButton,Accordion"></script>

    // For local development, we'll inline a simplified version:
    console.log('[mdxui/js] Demo loaded. In production, use the CDN hydration script.');
    console.log('[mdxui/js] Components to hydrate:', ['ThemeToggle', 'Counter', 'CopyButton', 'Accordion']);

    // Note: This example demonstrates the HTML structure and CSS.
    // To see the full hydration system in action, deploy the worker and use the CDN URL.
  </script>

  <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border); text-align: center; opacity: 0.6;">
    <p>
      Built with <strong>@mdxui/js</strong> -
      <a href="https://github.com/mdx-org-ai" style="color: var(--primary);">GitHub</a>
    </p>
  </footer>
</body>
</html>
