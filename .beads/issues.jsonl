{"id":"mdx-3od","title":"Consolidate SDK provider for workerd model","description":"\n**Goal**: Simplify SDK provider to assume workerd execution context.\n\n## RED Phase (Tests First)\n- Write tests for createSDKProvider() with workerd context\n- Test local vs remote context detection\n- Test database binding injection\n\n## GREEN Phase (Implementation)\n- Remove bun-specific and node-specific code paths\n- Assume workerd execution model throughout\n- Simplify environment detection\n\n## REFACTOR Phase\n- Extract common SDK utilities\n- Add TypeScript strict typing\n- Document SDK provider patterns\n\n**Files**: packages/mdxe/src/sdk-provider.ts, packages/mdxe/tests/sdk.test.ts","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:33.512853-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:48:33.512853-06:00","dependencies":[{"issue_id":"mdx-3od","depends_on_id":"mdx-861","type":"blocks","created_at":"2026-01-30T07:49:27.337303-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-6kc","title":"Implement WebSocket live tailing for mdxe","description":"\n**Goal**: Add real-time event streaming via WebSocket.\n\n## RED Phase (Tests First)\n- Write tests for WebSocket connection lifecycle\n- Test subscription with filters\n- Test automatic reconnection with backoff\n- Test keepalive ping/pong\n\n## GREEN Phase (Implementation)\n- Create TailClient with WebSocket connection\n- Implement subscribe/unsubscribe messages\n- Add exponential backoff reconnection (1s base, 30s max)\n- Handle connection state callbacks\n\n## REFACTOR Phase\n- Add RPC protocol option (capnweb)\n- Optimize message batching\n- Add connection metrics\n\n**Files**: packages/mdxe/src/tail/ws-client.ts, packages/mdxe/src/tail/ws-client.test.ts","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:54.594213-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T08:04:14.484739-06:00","closed_at":"2026-01-30T08:04:14.484739-06:00","close_reason":"Completed with passing tests","dependencies":[{"issue_id":"mdx-6kc","depends_on_id":"mdx-xzk","type":"blocks","created_at":"2026-01-30T07:49:28.491945-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-6oh","title":"Port ai-evaluate code generation patterns to @mdxe/workers","description":"\n**Goal**: Adopt ai-evaluate's code generation architecture for MDX evaluation.\n\n## RED Phase (Tests First)\n- Write tests for `generateWorkerCode(mdxContent)` that compiles MDX to worker module\n- Write tests for module transformation (ES6 exports → global scope)\n- Write tests for console capture and log collection\n- Test timeout handling and error isolation\n\n## GREEN Phase (Implementation)\n- Port generateWorkerCode() from ai-evaluate patterns\n- Implement MDX → JavaScript compilation with @mdxe/isolate\n- Add console capture wrapper\n- Implement timeout via AbortController\n\n## REFACTOR Phase\n- Extract shared utilities to @mdxe/isolate if needed\n- Optimize code generation for common patterns\n- Add JSDoc documentation\n\n**Files**: packages/@mdxe/workers/src/generate.ts, packages/@mdxe/workers/src/generate.test.ts","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:55.314808-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:57:58.381016-06:00","closed_at":"2026-01-30T07:57:58.381016-06:00","close_reason":"Completed with passing tests"}
{"id":"mdx-73e","title":"Epic: mdxe tail Command","description":"Add mdxe tail command for real-time log/event streaming using ducktail patterns. Support WebSocket live mode and R2 historical mode with importance-based filtering.","status":"open","priority":2,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:24.967466-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:47:24.967466-06:00"}
{"id":"mdx-861","title":"Implement worker_loaders integration in @mdxe/workers","description":"\n**Goal**: Use Cloudflare Dynamic Worker Loaders for production MDX execution.\n\n## RED Phase (Tests First)\n- Write tests for `createWorkerFromMDX(id, mdxContent, env)`\n- Test worker caching by ID\n- Test custom bindings via ctx.exports\n- Test globalOutbound sandboxing (network blocking)\n\n## GREEN Phase (Implementation)\n- Implement loader.get() wrapper with MDX compilation\n- Add module bundling (mainModule + modules object)\n- Implement ctx.exports for custom APIs (SDK bindings)\n- Add tail workers support for logging\n\n## REFACTOR Phase\n- Add worker ID strategies (content hash, version-based)\n- Optimize for warm worker reuse\n- Add TypeScript types for WorkerCode structure\n\n**Files**: packages/@mdxe/workers/src/loader.ts, packages/@mdxe/workers/src/loader.test.ts","status":"in_progress","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:56.183965-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:59:36.661704-06:00","dependencies":[{"issue_id":"mdx-861","depends_on_id":"mdx-6oh","type":"blocks","created_at":"2026-01-30T07:49:25.765835-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-94o","title":"Keep @mdxe/workers pure (no Miniflare deps)","description":"\n**Goal**: Ensure @mdxe/workers has zero Node/Miniflare dependencies - pure Cloudflare Workers only.\n\n## RED Phase (Tests First)\n- Write tests that run in actual Workers environment (wrangler dev)\n- Test worker_loaders binding works correctly\n- Test ctx.exports for custom bindings\n- Verify no Node.js APIs are used\n\n## GREEN Phase (Implementation)\n- Remove any Miniflare imports/dependencies\n- Use only Cloudflare Workers APIs\n- Implement worker_loaders integration directly\n- Add proper wrangler.toml configuration\n\n## REFACTOR Phase\n- Ensure package has minimal dependencies\n- Add Cloudflare-specific TypeScript types\n- Document Workers-only constraints\n\n**Files**: packages/@mdxe/workers/src/index.ts, packages/@mdxe/workers/wrangler.toml","status":"closed","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:57.120021-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:58:30.786243-06:00","closed_at":"2026-01-30T07:58:30.786243-06:00","close_reason":"171 tests pass, pure Workers package with zero Node.js deps"}
{"id":"mdx-baf","title":"Epic: @mdxe/workers Unification","description":"Unify @mdxe/node, @mdxe/bun, and @mdxe/workers into a single @mdxe/workers package using ai-evaluate code generation patterns. Use Miniflare for local dev, worker_loaders for production.","status":"open","priority":1,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:23.2375-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:47:23.2375-06:00"}
{"id":"mdx-cjw","title":"Simplify mdxe CLI runtime selection","description":"\n**Goal**: Simplify --target options to use unified workerd execution model.\n\n## RED Phase (Tests First)\n- Write tests for --target workers (default)\n- Write tests for --target node (Miniflare)\n- Write tests for --target bun (Miniflare)\n- Test that all targets produce identical results\n\n## GREEN Phase (Implementation)\n- Update CLI to route all targets through workerd-based execution\n- Remove divergent code paths between runtimes\n- Simplify target detection and validation\n\n## REFACTOR Phase\n- Remove dead code from old runtime implementations\n- Consolidate error handling\n- Update help text\n\n**Files**: packages/mdxe/src/cli.ts, packages/mdxe/tests/cli.test.ts","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:32.464621-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:48:32.464621-06:00","dependencies":[{"issue_id":"mdx-cjw","depends_on_id":"mdx-ogh","type":"blocks","created_at":"2026-01-30T07:49:27.147521-06:00","created_by":"Nathan Clevenger"},{"issue_id":"mdx-cjw","depends_on_id":"mdx-eo1","type":"blocks","created_at":"2026-01-30T07:49:27.241254-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-cxz","title":"Implement R2 historical tailing for mdxe","description":"\n**Goal**: Add historical event retrieval from R2 storage.\n\n## RED Phase (Tests First)\n- Write tests for fetching events by date range\n- Test pagination with offset/limit\n- Test polling with deduplication (--follow mode)\n- Test source/type/importance filtering\n\n## GREEN Phase (Implementation)\n- Create historical tail endpoint client\n- Implement polling loop with 2s interval\n- Add Set-based deduplication by timestamp\n- Support date range queries\n\n## REFACTOR Phase\n- Add Parquet file support via mdxdb/parquet\n- Optimize for large event volumes\n- Add caching for repeated queries\n\n**Files**: packages/mdxe/src/tail/historical.ts, packages/mdxe/src/tail/historical.test.ts","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:55.646482-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T08:04:14.486636-06:00","closed_at":"2026-01-30T08:04:14.486636-06:00","close_reason":"Completed with passing tests","dependencies":[{"issue_id":"mdx-cxz","depends_on_id":"mdx-xzk","type":"blocks","created_at":"2026-01-30T07:49:28.589041-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-dfl","title":"Integrate mdxe deploy with mdxdb/do storage","description":"\n**Goal**: Store deployed content in Durable Objects via mdxdb/do.\n\n## RED Phase (Tests First)\n- Write tests for DO-based content storage\n- Test R2 backup for large files\n- Test parquet storage for structured data\n- Test content retrieval via worker_loaders\n\n## GREEN Phase (Implementation)\n- Connect to mdxdb/do for content persistence\n- Store MDX content, compiled code, and metadata\n- Implement tiered storage (DO SQLite hot, R2 warm)\n- Add content versioning\n\n## REFACTOR Phase\n- Add content diffing for efficient updates\n- Implement content garbage collection\n- Add storage metrics\n\n**Files**: packages/@mdxe/deploy/src/do-storage.ts, packages/@mdxe/deploy/src/do-storage.test.ts","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:49:12.251516-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:49:12.251516-06:00","dependencies":[{"issue_id":"mdx-dfl","depends_on_id":"mdx-oxh","type":"blocks","created_at":"2026-01-30T07:49:31.904342-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-emx","title":"Epic: mdxe Workers-Only Architecture Overhaul","description":"Migrate mdxe to a workers-only model using dynamic worker loaders and ai-evaluate patterns. Eliminate node/bun runtime support in favor of Miniflare for local dev and worker_loaders for production. Integrate with mdxdb/do for deployment and add ducktail-style log tailing.","status":"open","priority":1,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:11.9374-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:47:11.9374-06:00"}
{"id":"mdx-eo1","title":"Update @mdxe/bun to use Miniflare","description":"\n**Goal**: Migrate @mdxe/bun to use Miniflare for workerd execution (same as @mdxe/node).\n\n## RED Phase (Tests First)\n- Write tests for Miniflare-based evaluate() in Bun context\n- Test that existing @mdxe/bun APIs still work\n- Test Bun-specific optimizations (if any)\n\n## GREEN Phase (Implementation)\n- Replace native Bun execution with Miniflare\n- Ensure API compatibility with @mdxe/workers\n- Share code generation logic from @mdxe/isolate\n\n## REFACTOR Phase\n- Extract shared Miniflare utilities to common location\n- Optimize for Bun's faster startup\n- Update documentation\n\n**Files**: packages/@mdxe/bun/src/evaluate.ts, packages/@mdxe/bun/src/evaluate.test.ts","status":"in_progress","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:58.693763-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:59:36.857515-06:00","dependencies":[{"issue_id":"mdx-eo1","depends_on_id":"mdx-6oh","type":"blocks","created_at":"2026-01-30T07:49:25.955879-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-i7c","title":"Add gitx webhook sync for GitHub integration","description":"\n**Goal**: Keep deployed DOs in sync with GitHub repos via gitx.\n\n## RED Phase (Tests First)\n- Write tests for webhook payload handling\n- Test post-receive hook triggers deployment\n- Test conflict resolution on concurrent edits\n- Test branch-based deployment (main vs preview)\n\n## GREEN Phase (Implementation)\n- Register gitx post-receive webhook in mdxdb/do\n- Parse GitHub push events\n- Trigger incremental deployment on changes\n- Support branch → environment mapping\n\n## REFACTOR Phase\n- Add deployment status reporting to GitHub\n- Implement deployment previews for PRs\n- Add sync status dashboard\n\n**Files**: packages/@mdxe/deploy/src/github-sync.ts, packages/@mdxe/deploy/src/github-sync.test.ts","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:49:12.83122-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:49:12.83122-06:00","dependencies":[{"issue_id":"mdx-i7c","depends_on_id":"mdx-dfl","type":"blocks","created_at":"2026-01-30T07:49:32.002624-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-ogh","title":"Migrate @mdxe/node functionality to @mdxe/workers","description":"\n**Goal**: Move all @mdxe/node capabilities into unified @mdxe/workers.\n\n## RED Phase (Tests First)\n- Copy @mdxe/node tests to @mdxe/workers\n- Verify all existing evaluate() tests pass\n- Add tests for createEvaluator() factory pattern\n\n## GREEN Phase (Implementation)\n- Merge node.ts evaluate logic into workers/local.ts\n- Ensure API compatibility (evaluate, createEvaluator, Evaluator)\n- Update package exports\n\n## REFACTOR Phase\n- Remove duplicate code between node/workers\n- Update @mdxe/node to re-export from @mdxe/workers (deprecation path)\n- Add migration guide in README\n\n**Files**: packages/@mdxe/workers/src/index.ts, packages/@mdxe/node/src/index.ts","status":"in_progress","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:57.866471-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:59:36.759243-06:00","dependencies":[{"issue_id":"mdx-ogh","depends_on_id":"mdx-6oh","type":"blocks","created_at":"2026-01-30T07:49:25.861634-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-oxh","title":"Create worker_loaders deployment in mdxe","description":"\n**Goal**: Deploy compiled MDX to Cloudflare via worker_loaders.\n\n## RED Phase (Tests First)\n- Write tests for MDX → worker module compilation\n- Test deployment configuration generation\n- Test multi-file deployment (code + content)\n- Test worker ID generation (content hash)\n\n## GREEN Phase (Implementation)\n- Compile MDX files to worker modules via @mdxe/isolate\n- Generate wrangler configuration with worker_loaders binding\n- Upload modules via Cloudflare API\n- Return deployment URL and worker IDs\n\n## REFACTOR Phase\n- Add incremental deployment (only changed files)\n- Optimize for large deployments\n- Add rollback support\n\n**Files**: packages/mdxe/src/commands/deploy.ts, packages/@mdxe/deploy/src/workers.ts","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:49:11.399874-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:49:11.399874-06:00","dependencies":[{"issue_id":"mdx-oxh","depends_on_id":"mdx-861","type":"blocks","created_at":"2026-01-30T07:49:31.807255-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-phu","title":"Epic: mdxdb/do Deployment Integration","description":"Integrate mdxe deploy with mdxdb/do for deploying MDX content/code/data to Durable Objects via worker_loaders. Include gitx webhook sync for GitHub integration.","status":"open","priority":2,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:25.690164-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:47:25.690164-06:00"}
{"id":"mdx-ryc","title":"Update mdxe dev command for Miniflare","description":"\n**Goal**: Ensure mdxe dev uses Miniflare consistently for local development.\n\n## RED Phase (Tests First)\n- Write tests for dev server startup\n- Test hot reload functionality\n- Test SDK bindings in dev mode\n\n## GREEN Phase (Implementation)\n- Route dev command through @mdxe/node (Miniflare)\n- Add wrangler dev integration option\n- Implement file watching for hot reload\n\n## REFACTOR Phase\n- Optimize dev server startup time\n- Add better error messages\n- Document dev workflow\n\n**Files**: packages/mdxe/src/commands/dev.ts, packages/mdxe/tests/dev.test.ts","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:34.332593-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:48:34.332593-06:00","dependencies":[{"issue_id":"mdx-ryc","depends_on_id":"mdx-cjw","type":"blocks","created_at":"2026-01-30T07:49:29.764861-06:00","created_by":"Nathan Clevenger"}]}
{"id":"mdx-vbx","title":"Epic: mdxe CLI Simplification","description":"Simplify mdxe CLI by removing multi-runtime branches. Single execution path through @mdxe/workers with Miniflare. Remove --target node|bun options.","status":"open","priority":1,"issue_type":"epic","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:47:24.308618-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:47:24.308618-06:00"}
{"id":"mdx-xzk","title":"Define event types and filtering for mdxe tail","description":"\n**Goal**: Create event type system based on ducktail patterns.\n\n## RED Phase (Tests First)\n- Write tests for MdxeEvent type structure\n- Write tests for EventFilter matching logic\n- Test importance-based filtering (critical|high|normal|low)\n- Test source prefix matching with wildcards\n\n## GREEN Phase (Implementation)\n- Define MdxeEvent interface (timestamp, source, type, importance, data, traceId)\n- Implement EventFilter with source, type, minImportance\n- Add filter matching function\n\n## REFACTOR Phase\n- Add Zod schema for event validation\n- Optimize filter matching performance\n- Add TypeScript strict types\n\n**Files**: packages/mdxe/src/tail/types.ts, packages/mdxe/src/tail/filter.ts","status":"closed","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:53.490447-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:57:58.399237-06:00","closed_at":"2026-01-30T07:57:58.399237-06:00","close_reason":"Completed with passing tests"}
{"id":"mdx-ybd","title":"Create mdxe tail CLI command","description":"\n**Goal**: Add `mdxe tail` command with full options.\n\n## RED Phase (Tests First)\n- Write tests for CLI argument parsing\n- Test --live mode launches WebSocket client\n- Test --follow mode enables polling\n- Test --source, --type, --importance filters\n- Test colorized output by importance\n\n## GREEN Phase (Implementation)\n- Add tail command to CLI router\n- Implement option parsing (--live, --follow, --date, --source, --type, --importance, --limit)\n- Add colorized console output (red=critical, yellow=high, gray=low)\n- Format: timestamp importance source type [data]\n\n## REFACTOR Phase\n- Add --json output format\n- Support piping to other commands\n- Add --stats subcommand\n\n**Files**: packages/mdxe/src/commands/tail.ts, packages/mdxe/tests/tail.test.ts","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-01-30T07:48:56.727567-06:00","created_by":"Nathan Clevenger","updated_at":"2026-01-30T07:48:56.727567-06:00","dependencies":[{"issue_id":"mdx-ybd","depends_on_id":"mdx-6kc","type":"blocks","created_at":"2026-01-30T07:49:29.859565-06:00","created_by":"Nathan Clevenger"},{"issue_id":"mdx-ybd","depends_on_id":"mdx-cxz","type":"blocks","created_at":"2026-01-30T07:49:29.953286-06:00","created_by":"Nathan Clevenger"}]}
